<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_17) on Tue Oct 08 17:41:09 CEST 2013 -->
<title>DropboxAuthorizationManager</title>
<meta name="date" content="2013-10-08">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DropboxAuthorizationManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DropboxAuthorizationManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../server/Dropbox.html" title="class in server"><span class="strong">Prev Class</span></a></li>
<li><a href="../server/FileInfo.html" title="class in server"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?server/DropboxAuthorizationManager.html" target="_top">Frames</a></li>
<li><a href="DropboxAuthorizationManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">server</div>
<h2 title="Class DropboxAuthorizationManager" class="title">Class DropboxAuthorizationManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>server.DropboxAuthorizationManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">DropboxAuthorizationManager</span>
extends <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Class that manages authorization for Dropbox</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>soleksiy</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../server/DropboxAuthorizationManager.html#DropboxAuthorizationManager()">DropboxAuthorizationManager</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../server/DropboxAuthorizationManager.html#configureAccessTokens(server.data.UserManager, java.lang.String)">configureAccessTokens</a></strong>(<a href="../server/data/UserManager.html" title="class in server.data">UserManager</a>&nbsp;userManager,
                     <a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;uid)</code>
<div class="block">Gets the user from server session.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>org.json.simple.JSONObject</code></td>
<td class="colLast"><code><strong><a href="../server/DropboxAuthorizationManager.html#getAuthenticationResponse(java.lang.String, int)">getAuthenticationResponse</a></strong>(<a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;serverName,
                         int&nbsp;port)</code>
<div class="block">Gets the response that contains a Dropbox redirect URL and an empty file list (If the file list is not empty, the client simply displays the list.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.dropbox.client2.session.WebAuthSession</code></td>
<td class="colLast"><code><strong><a href="../server/DropboxAuthorizationManager.html#getWebAuthSession()">getWebAuthSession</a></strong>()</code>
<div class="block">Tries to fetch a Dropbox WebAuthSession from the server session.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.dropbox.client2.session.WebAuthSession</code></td>
<td class="colLast"><code><strong><a href="../server/DropboxAuthorizationManager.html#initWebAuthSession()">initWebAuthSession</a></strong>()</code>
<div class="block">Creates a new <code>WebAuthSession</code></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../server/DropboxAuthorizationManager.html#setCurrentUserInAuthSession(server.model.User)">setCurrentUserInAuthSession</a></strong>(<a href="../server/model/User.html" title="class in server.model">User</a>&nbsp;user)</code>
<div class="block">Forms an access token pair from the user's access key and access secret, sets the token pair as a property of the current Dropbox WebSession.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../server/DropboxAuthorizationManager.html#setServerSession(spark.Session)">setServerSession</a></strong>(spark.Session&nbsp;session)</code>
<div class="block">Sets web server session</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DropboxAuthorizationManager()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DropboxAuthorizationManager</h4>
<pre>public&nbsp;DropboxAuthorizationManager()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setServerSession(spark.Session)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setServerSession</h4>
<pre>public&nbsp;void&nbsp;setServerSession(spark.Session&nbsp;session)</pre>
<div class="block">Sets web server session</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>session</code> - Web server (Spark) session.</dd></dl>
</li>
</ul>
<a name="configureAccessTokens(server.data.UserManager, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configureAccessTokens</h4>
<pre>public&nbsp;boolean&nbsp;configureAccessTokens(<a href="../server/data/UserManager.html" title="class in server.data">UserManager</a>&nbsp;userManager,
                            <a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;uid)</pre>
<div class="block">Gets the user from server session. If the user is not there: if the user UID is known, get the user from the database; if the user UID is not known, get the user UID from the Dropbox <code>WebAuthSession.WebAuthInfo</code>.
 From the user's access key and access secret form an access token pair and set it in the current Dropbox WebSession.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>userManager</code> - </dd><dd><code>uid</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>True if success, false otherwise.</dd></dl>
</li>
</ul>
<a name="getAuthenticationResponse(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuthenticationResponse</h4>
<pre>public&nbsp;org.json.simple.JSONObject&nbsp;getAuthenticationResponse(<a href="http://download.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;serverName,
                                                   int&nbsp;port)</pre>
<div class="block">Gets the response that contains a Dropbox redirect URL and an empty file list (If the file list is not empty, the client simply displays the list. If the file list is empty, the client navigates to the 
 authorization URL)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>serverName</code> - </dd><dd><code>port</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>JSON object with the fields url and fileList.</dd></dl>
</li>
</ul>
<a name="setCurrentUserInAuthSession(server.model.User)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCurrentUserInAuthSession</h4>
<pre>public&nbsp;void&nbsp;setCurrentUserInAuthSession(<a href="../server/model/User.html" title="class in server.model">User</a>&nbsp;user)</pre>
<div class="block">Forms an access token pair from the user's access key and access secret, sets the token pair as a property of the current Dropbox WebSession.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>user</code> - </dd></dl>
</li>
</ul>
<a name="initWebAuthSession()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initWebAuthSession</h4>
<pre>public&nbsp;com.dropbox.client2.session.WebAuthSession&nbsp;initWebAuthSession()</pre>
<div class="block">Creates a new <code>WebAuthSession</code></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>New <code>WebAuthSession</code></dd></dl>
</li>
</ul>
<a name="getWebAuthSession()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getWebAuthSession</h4>
<pre>public&nbsp;com.dropbox.client2.session.WebAuthSession&nbsp;getWebAuthSession()</pre>
<div class="block">Tries to fetch a Dropbox WebAuthSession from the server session. If it is not there, initiates a WebAuthSession and stores it in the server session.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The retrieved WebAuthSession</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DropboxAuthorizationManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../server/Dropbox.html" title="class in server"><span class="strong">Prev Class</span></a></li>
<li><a href="../server/FileInfo.html" title="class in server"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?server/DropboxAuthorizationManager.html" target="_top">Frames</a></li>
<li><a href="DropboxAuthorizationManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
